#!/usr/bin/env ruby

# Add libs to path
$: << File.expand_path("../../lib/", __FILE__)


require 'core/bot'
require 'logger/tty'

module Test
   def enable_x
      puts "Enabled x\n" 
   end

   def start
      puts "Hooked start\n"
      super
   end
end

class MyBot < Core::Bot
   include Test

   def start
      puts "Fooo\n"
      super
   end
 
   # include Data::Database

   # include Data::UserAuth
   # include Data::ChannelLogging
   # include Data::MemoServ

   # include Fun::CatResolver
end

bot = MyBot.new do 

        set_logger Logger::TTY.new(:enable_debug)
        
        add_server :freenode do |s|
            s.addr = "irc.freenode.net"
            s.port = 6667
            s.username = ["_rewheel_", "_rewheel__"]
            s.channels = ["#fde", "#rewheel-t"]
        end

        add_server :quakenet do |s|
            s.addr = "irc.quakenet.org"
            s.port = 6667
            s.username = ["_rewheel_", "_rewheel__"]
        end


   # with_db(
   #     :adapter   => "sqlite",
   #     :database  => "/files/dev/rewheel/db/testing.sqlite"
   # )
   
   enable_x

end

bot.start
